## HTTP λ©”μ„λ“μ μ†μ„±

- μ•μ „(safe)
- λ©±λ“±(Idempotent)
- μΊμ‹ κ°€λ¥(Cacheable)
    

## μ•μ •μ„±(Safe)

- λ³΄μ• μ·¨μ•½μ„±μ΄ μ•„λ‹λΌ, νΈμ¶ν•΄λ„ λ¦¬μ†μ¤κ°€ λ³€κ²½λμ§€ μ•λ” μ„±μ§
- GETμ€ λ°μ΄ν„°λ¥Ό μ΅°νλ§ ν•λ―€λ΅ λ¦¬μ†μ¤λ¥Ό λ³€κ²½, μμ •ν•μ§€ μ•λ”λ‹¤. μ¦‰ μ•μ „ν• HTTP λ©”μ„λ“λ‹¤
- λ°λ©΄ μ•„λ 4κ°€μ§€ λ©”μ„λ“λ” λ°μ΄ν„°λ¥Ό λ³€κ²½ν•κ±°λ‚ μ‚­μ ν•λ―€λ΅ μ•μ „ν•μ§€ μ•λ‹¤.

<aside>
π’΅ **μ•μ „κ³Ό λ©±λ“±

- ν• λ²μ„ νΈμ¶ν•λ“ , μ—¬λ¬λ² νΈμ¶ν•λ“  μμ •μ΄ λ°μƒν•μ§€ μ•λ” μ†μ„±μ€ ?

- λ¦¬μ†μ¤μ— μμ •μ΄ λ°μƒν•λ‹¤κ³  ν•λ”λΌλ„, λ©”μ„λ“λ¥Ό μ—¬λ¬ λ² μ‹¤ν–‰ν• κ²°κ³Όκ°€ ν• λ² μ‹¤ν–‰ν• κ²°κ³Όκ°€ κ°™λ‹¤λ©΄ λ§μ΅±ν•λ” μ†μ„±μ€?**

</aside>

## λ©±λ“±μ„±(Idempotent)

- λ™μΌν• μ”μ²­μ„ ν•λ² λ³΄λ‚΄λ” κ²ƒ = μ—¬λ¬λ² μ—°μ†μΌλ΅ λ³΄λ‚΄λ” κ²ƒ
- ν¨κ³Όλ„ λ™μΌν•κ³ , μ„λ²„μ μƒνƒλ„ λ™μΌν•¨
- μ‘λ‹µ μƒνƒ μ½”λ“κ°€ μ•„λ‹λΌ μ„λ²„μ μƒνƒμ„μ„ μ μν•μ!
    - HTTP μ¤ν™ λ…μ‹μ— μν•λ©΄, GET, PUT, DELETEλ” λ©±λ“±μ„±μ„ κ°€μ§€λ„λ΅, **POSTλ” PATCHλ” λ©±λ“±μ„±μ„ κ°€μ§€μ§€ μ•λ„λ΅ κµ¬ν„ν•΄μ•Ό ν•λ‹¤**
    

### POST

- λ©±λ“±ν•μ§€ μ•κ² μ„¤κ³„λ λ©”μ„λ“λ“¤μ€ λ‘κ°™μ€ μ”μ²­μ„ λ‹¤μ‹ μ „μ†΅ν•  κ²½μ° λ¬Έμ κ°€ λ°μƒν•¨ 
(μ„λ²„ μμ²΄λ‚ μΈν„°λ„· μ„  λ“±μ—μ„ λ¬Έμ  λ°μƒ κ°€λ¥)
- μ„λ²„μ—μ„ μ •μƒ μ²λ¦¬ν–μμ—λ„, λ„¤νΈμ›ν¬ λ¬Έμ λ΅ μ •μƒμ μΈ μ‘λ‹µμ„ λ°›μ§€ μ•μ•λ‹¤λ©΄, POST μ¬μ”μ²­!

### PATCH λ©±λ“± O or X

- PUTμ΄ λ¦¬μ†μ¤ μ „μ²΄ κµμ²΄λΌλ©΄, PATCHλ” λ¦¬μ†μ¤ λ¶€λ¶„ μμ •
- κµ¬ν„μ΄ PUTκ³Ό λ™μΌν• λ°©μ‹μ΄λΌλ©΄ λ©±λ“±μ„±μ„ κ°€μ§
    - μμ •ν•  λ¦¬μ†μ¤μ **μΌλ¶€λ¶„λ§ λ‹΄μ•„μ„ λ³΄λ‚΄λ” κ²½μ°**
    
    ```jsx
    // κΈ°μ΅΄μ λ¦¬μ†μ¤
    {
      id: 1,
      name: "κΉ€μ² μ",
      age: 15  
    }
    ```

        ```jsx
    // μ”μ²­ λ°”λ””
    {
      age: 20
    }
    ```
    

    ```jsx
    // λ³€κ²½λ λ¦¬μ†μ¤
    {
      id: 1,
      name: "κΉ€μ² μ",
      age: 20
    }
    ```
    
    - μ¤ν™μƒ κµ¬ν„ λ°©λ²•μ— μ ν•μ΄ μ—†μΌλ―€λ΅, λ°μ΄ν„°λ¥Ό λ€μ²΄ν•λ„λ΅ κµ¬μ„±ν•  ν•„μ”κ°€ μ—†μ
    β‡’ PATCHμ λ™μ‘μ„ **`μ¦κ°€`**λ¥Ό ν†µν• λ³€κ²½
    β‡’ λ§¤ μ”μ²­λ§λ‹¤ ageκ°€ 1μ”© μ¦κ°€ν•λ„λ΅ μ”μ²­ν•λ‹¤λ©΄, λ§¤ μ”μ²­λ§λ‹¤ μ„λ²„ μƒνƒκ°€ λ‹¬λΌμ§ -> λ¦¬μ†μ¤
        
       
    
    ## λΉ„λ©±λ“±ν• HTTP λ©”μ„λ“ μ¤‘λ³µ μ”μ²­μ„ λ°©μ§€ν•λ” λ²•
    
    
    1. **ν΄λΌμ΄μ–ΈνΈ, μ„λ²„ κ°κ°μ—μ„ μ¤‘λ³µ μ”μ²­μ„ λ°©μ§€ν•κΈ°!**
    : ν΄λΌμ΄μ–ΈνΈμ—μ„ μ”μ²­μ„ λ³΄λ‚Έ ν›„ μ„λ²„μ—μ„ μ²λ¦¬λκΈ° μ „μ— λ„¤νΈμ›ν¬ λ¬Έμ λ΅ μΈν•΄ μ”μ²­μ΄ μ¤‘λ³µμΌλ΅ μ „λ‹¬ β†’  ν΄λΌμ΄μ–ΈνΈμ—μ„λ” μ¤‘λ³µ μ”μ²­μ„ λ°©μ§€ν•λ”λΌλ„, μ„λ²„μ—μ„λ” μ¤‘λ³µ μ”μ²­μ„ μ²λ¦¬ β†’ λ©±λ“±μ„±μ„ λ³΄μ¥ν•λ ¤λ©΄, μ„λ²„μ—μ„λ„ μ¤‘λ³µ μ”μ²­μ„ λ¬΄μ‹ν•κ³  μ΄μ „μ— μ²λ¦¬ν• μ”μ²­κ³Ό λ™μΌν• μ‘λ‹µμ„ λ°ν™ν•΄μ•Ό ν•¨
    
     * ν΄λΌμ΄μ–ΈνΈ
            - μ”μ²­ μ „μ†΅ μ „μ— **μ΄μ „ μ”μ²­κ³Ό λΉ„κµν•μ—¬ κ°™μ€ μ”μ²­μ΄ μ•„λ‹λ©΄** μ”μ²­ μ „μ†΅
            - μ”μ²­ μ „μ†΅ ν›„μ— μ„λ²„μ—μ„ **μ‘λ‹µ λ°›μ„ λ•κΉμ§€ μ¤‘λ³µ μ”μ²­ λ°©μ§€ ν”λκ·Έ ν™μ„±ν™”**ν•μ—¬ λ‹¤λ¥Έ μ”μ²­μ„ μ°¨λ‹¨
            - μ„λ²„μ—μ„ μ‘λ‹µ λ°›μ€ ν›„ μ¤‘λ³µ μ”μ²­ λ°©μ§€ ν”λκ·Έ λΉ„ν™μ„±ν™”
        
        ```jsx
        let requestPending = false; // μ¤‘λ³µ μ”μ²­ λ°©μ§€ ν”λκ·Έ μ΄κΈ°κ°’
        
        function sendRequest() {
          if (!requestPending) {
            requestPending = true; // μ¤‘λ³µ μ”μ²­ λ°©μ§€ ν”λκ·Έ ν™μ„±ν™”
            // μ”μ²­ μ „μ†΅ μ½”λ“
            // ...
          } else {
            console.log("μ΄μ „ μ”μ²­μ΄ μ•„μ§ μ²λ¦¬ μ¤‘μ…λ‹λ‹¤.");
          }
        }
        
        function handleResponse() {
          // μ‘λ‹µ μ²λ¦¬ μ½”λ“
          // ...
          requestPending = false; // μ¤‘λ³µ μ”μ²­ λ°©μ§€ ν”λκ·Έ λΉ„ν™μ„±ν™”
        }
        ```
        
    * μ„λ²„
            - μ”μ²­ μ²λ¦¬ μ¤‘μ— μ¤‘λ³µ μ”μ²­ λ°©μ§€ ν”λκ·Έλ¥Ό μ‚¬μ©ν•μ—¬ κ°™μ€ μ”μ²­μ΄ μ—¬λ¬ λ² λ“¤μ–΄μ¤λ©΄ μ²λ¦¬ν•μ§€ μ•λ„λ΅ ν•¨
            - μ”μ²­ μ²λ¦¬ κ²°κ³Όλ¥Ό μΊμ‹ν•μ—¬ κ°™μ€ μ”μ²­μ΄ μ—¬λ¬ λ² λ“¤μ–΄μ™€λ„ μΊμ‹λ κ²°κ³Όλ¥Ό λ°”λ΅ λ°ν™ν•¨μΌλ΅μ¨ μ²λ¦¬ μ†λ„λ¥Ό λ†’μ„
            - μ‘λ‹µ μ „μ†΅ ν›„μ— ν΄λΌμ΄μ–ΈνΈμ—μ„ μ”μ²­ μ¤‘λ³µ λ°©μ§€ ν”λκ·Έλ¥Ό ν™•μΈν•μ—¬ μ¤‘λ³µ μ”μ²­μ„ λ§‰μ
    
    2. **IDμ™€ UUID**
        - μΌλ°μ μΈ IDλ” UUIDλ¥Ό μ‚¬μ©ν•λ” κ²ƒλ³΄λ‹¤ μ¤‘λ³µ μ”μ²­ λ°©μ§€μ— μ·¨μ•½
            - μΌλ°μ μΈ IDλ” μ‹κ°„μ΄ μ§€λ‚λ©΄μ„ μ¤‘λ³µλ  κ°€λ¥μ„±μ΄ μκΈ° λ•λ¬Έ
        - ν΄λΌμ΄μ–ΈνΈκ°€ UUIDλ¥Ό μ‚¬μ©ν•΄μ„ μ¤‘λ³µ μ”μ²­ β†’ μ„λ²„μ—μ„λ” μ¤‘λ³µ μ”μ²­μ„ ν•μ§€ μ•λ”λ‹¤λ©΄ ?
            - μ¤‘λ³µ μ”μ²­μ΄ λ°μƒν•λ”λΌλ„ κ° μ”μ²­λ§λ‹¤ UUIDκ°€ μƒμ„±λλ―€λ΅, μ„λ²„μ—μ„λ” κ°κ°μ μ”μ²­μ„ κ³ μ ν• μ”μ²­μΌλ΅ μΈμ‹ν•κ³  μ²λ¦¬
        
        <aside>
        π’΅ μΌλ°μ μΌλ΅ μ¤‘λ³µ μ”μ²­μ— λ€ν• λ°©μ§€λ¥Ό μ„ν• IDλ” μ„λ²„μ—μ„ μƒμ„±ν•μ—¬ μ‘λ‹µμΌλ΅ λ°ν™ν•λ‹¤. ν΄λΌμ΄μ–ΈνΈκ°€ μƒλ΅μ΄ λ°μ΄ν„°λ¥Ό POST ν•  λ•, μ”μ²­ λ³Έλ¬Έμ— ID κ°’μ„ ν¬ν•¨μ‹ν‚¤μ§€ μ•μ•„λ„ λλ‹¤. μ„λ²„μ—μ„ μƒλ΅μ΄ λ°μ΄ν„°λ¥Ό μƒμ„±ν•λ©΄μ„, μμ²΄μ μΌλ΅ ID κ°’μ„ μƒμ„±ν•μ—¬ μ‘λ‹µμΌλ΅ μ „λ‹¬ν•κΈ° λ•λ¬Έ
        
        </aside>
        
        ```jsx
        import uuid
        
        def create_new_data():
            new_data = {
                'id': str(uuid.uuid4()), # μƒλ΅μ΄ ID κ°’ μƒμ„±
                'name': 'John Doe',
                'age': 30
            }
            # λ°μ΄ν„° μƒμ„± λ° μ‘λ‹µ
            return new_data
        ```
        
        **POST μ”μ²­ λ³Έλ¬Έ:**
        
        ```jsx
        {
            "name": "John Doe",
            "age": 30
        }
        ```
        
        **POST μ‘λ‹µ λ³Έλ¬Έ:**
        
        ```jsx
        {
            "id": "6c84fb90-12c4-11e1-840d-7b25c5ee775a",
            "name": "John Doe",
            "age": 30
        }
        ```
        
    
    <aside>
    π’΅ **ν΄λΌμ΄μ–ΈνΈκ°€ IDλ¥Ό μƒμ„±ν•λ” κ²ƒμ΄ μ μ©ν• κ²½μ°**λ”?
    
    - μ¤ν”„λΌμΈ μƒνƒμ—μ„ μƒλ΅μ΄ λ°μ΄ν„°λ¥Ό μƒμ„±ν•κ³ , μ„λ²„μ™€ μ—°κ²°λμ—μ„ λ• ν•΄λ‹Ή λ°μ΄ν„°λ¥Ό μ „μ†΅ν•λ” κ²½μ°
    β†’ ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„μ‹μ μΈ idλ¥Ό μƒμ„±ν•μ—¬, μ„λ²„μ™€ λ™κΈ°ν™”λ ν›„ μ„λ²„μ—μ„ μƒλ΅μ΄ idλ¥Ό ν• λ‹Ήλ°›μ•„μ„ ν•΄λ‹Ή κ°’μ„ μ—…λ°μ΄νΈ
    
    </aside>
    
    ```jsx
    const data = {
      id: generateTempId(), // μ„μ‹μ μΈ id μƒμ„±
      title: "New Post",
      content: "This is a new post"
    };
    
    fetch("/posts", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(data)
    })
      .then(response => response.json())
      .then(newData => {
        // μ„λ²„μ—μ„ μƒλ΅μ΄ idλ¥Ό ν• λ‹Ήλ°›μ•„ μ„μ‹μ μΈ idλ¥Ό μ—…λ°μ΄νΈ
        updateData(data.id, newData.id, newData);
      })
      .catch(error => {
        console.error(error);
      });
    ```
    
    ## μΊμ‹ κ°€λ¥μ„±
    
    : μ‘λ‹µ κ²°κ³Ό λ¦¬μ†μ¤λ¥Ό μΊμ‹±ν•΄μ„ ν¨μ¨μ μΌλ΅ μ‚¬μ©ν•  μ μλ”κ°€

    - μ¤ν™μƒμΌλ΅ GET, POST, PATCH μΊμ‹ κ°€λ¥
    - μ‹¤μ λ΅λ” **GETμ΄λ‚ HEAD μ •λ„λ§ μΊμ‹λ΅ μ΄μ©μ΄ κ°€λ¥**ν•κ³  POST μ™€ PATCH λ” μ§€μ›λμ§€ μ•λ” κ²½μ°κ°€ μΌλ°μ 
        - μΊμ‹λ¥Ό μ΄μ©ν•λ ¤λ©΄ μ› λ°μ΄ν„°κ°€ λ³€κ²½λμ§€ μ•κ³  μ μ§€λμ–΄μ•Ό ν•λ”λ°, GETμ„ μ μ™Έν• λ©”μ„λ“λ” κΈ°λ³Έμ μΌλ΅ λ°μ΄ν„° λ³€κ²½μ΄ μΌμ–΄λ‚λ” λ©”μ„λ“ μ΄λ―€λ΅, νΈμ¶λ΅ μΈν•΄ λ°μ΄ν„°κ°€ λ³€κ²½λλ©΄ μΊμ‹ λ°μ΄ν„°μ™€ λ¶μΌμΉ λ¨
        - μ μ§€κ°€ μ–΄λ µκ³  κµ¬ν„λ„ λ³µμ΅ν•μ—¬ μΊμ‹λ¥Ό μ΄μ©ν•μ§€ μ•μ!
    
    ### reference
    
    [π HTTPμ λ©±λ“±μ„± Β· μ•μ •μ„± Β· μΊμ‹μ„± π’― μ™„λ²½ μ΄ν•΄ν•κΈ°](https://inpa.tistory.com/entry/WEB-π-HTTPμ-λ©±λ“±μ„±-Β·-μ•μ •μ„±-Β·-μΊμ‹μ„±-π’―-μ™„λ²½-μ΄ν•΄ν•κΈ°)